<ul class="navbar-nav ms-auto align-items-center">
  <li class="nav-item me-2">
    <button class="theme-toggle btn btn-link text-white p-0 d-flex align-items-center">
      <i class="bi theme-icon me-2"></i>
      <span class="d-none d-lg-inline">Tema</span>
    </button>
  </li>

  <li class="nav-item">
    <%= link_to "Pesquisa", maps_search_path, class: "nav-link" %>
  </li>
  <li class="nav-item">
    <%= link_to "NotÃ­cias", news_path, class: "nav-link" %>
  </li>

  <!-- Dev login entry removed -->

  <% if user_signed_in? %>
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <% if current_user.avatar.attached? %>
          <%= image_tag url_for(current_user.avatar), class: "rounded-circle", style: "height:28px; width:28px; object-fit:cover; margin-right:8px;" %>
        <% end %>
        <span><%= current_user.name %></span>
      </a>

      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
        <li class="px-3 py-2">
          <div class="d-flex align-items-center">
            <% if current_user.avatar.attached? %>
              <%= image_tag url_for(current_user.avatar), class: "rounded-circle me-2", style: "height:56px; width:56px; object-fit:cover;" %>
            <% else %>
              <div class="rounded-circle bg-secondary me-2" style="width:56px; height:56px;"></div>
            <% end %>
            <div>
              <strong><%= current_user.name %></strong><br>
              <small class="text-muted"><%= current_user.email %></small>
            </div>
          </div>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li><%= link_to "Meu Perfil", profile_path(current_user), class: "dropdown-item" %></li>
        <li><%= link_to "Editar Perfil", edit_profile_path(current_user), class: "dropdown-item" %></li>
        <li>
          <%= button_to "Sair", destroy_user_session_path, method: :delete, class: "dropdown-item", data: { confirm: "Tem certeza?" } %>
        </li>
      </ul>
    </li>
  <% else %>
    <!-- hide Login link in mobile offcanvas (we keep profile links inside the profile card) -->
    <li class="nav-item d-none d-lg-block login-item">
      <%= link_to "Login", new_user_session_path, class: "nav-link" %>
    </li>
  <% end %>
</ul>
